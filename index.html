<!DOCTYPE html>
<html>

<head>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
    <style>
        .container-fluid {
            margin-top: 80px;
        }

        a.anchor {
            display: block;
            position: relative;
            top: -74px;
            visibility: hidden;
        }

        #quickSearch {
            position: fixed;
        }

        #addNew {
            float: right;
        }

        #editButton {
            float: right;
        }

        #deleteButton {
            float: right;
            margin-left: 5px;
        }
        .editSection {
          padding: 10px;
          border-radius: 15px;
        }
        .multipleChoice {
          margin-bottom: 10px;
          width: 29%;
        }
        .answerInput {
          margin-bottom: 10px;
          width: 59%;
          float: left;
        }
        .deleteAnswer {
          margin-top: 7px;
          width: 10%;
          float: right;
        }
        label {
          width: 100%;
        }
        .form-check {
          width: 49%;
          background-color: white;
          padding: 10px;
          border-radius: 10px;
        }

        .saveButton {
          margin-left: 10px;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-light bg-faded navbar-fixed-top">
        <h1 class="navbar-brand">Discuss.io Assignment</h1>
          <button id="addNew" class="btn btn-success" type="submit">Add Question</button>
    </nav>

    <div class="container-fluid">
        <div class="col-md-7 offset-md-1" id="questions">
          <!-- I will need to get rid of this section after creating the editing section for the cards -->
          <div id='question' value='"+ count +"' class='card'>
            <div class='card-header'>
              <h4>Question " + count + "</h4>
              <button id='deleteButton' type='button' class='btn btn-danger' data-toggle='modal' data-target='#myModal'>Delete</button>
              <button id='editButton' value='"+ count +"' type='button' class='editButton btn btn-warning'>Edit</button>
            </div>
            <div class='card-block mainQuestion'>
              <p class='card-text'>Some quick example text to build on the card title</p>
            </div>
            <div class='card-block edit'>
              <form class='editSection' value='" + count +"' style='display: block; background-color: grey;'>
                <div class='form-group questionText'>
                  <label for='comment'>Question:</label>
                  <textarea class='form-control' id='comment'></textarea>
                </div>
                <div class='form-group answers'>
                  <label for='sel1'>Answers:</label>
                  <input type='text' class='form-control answerInput'>
                  <a class='deleteAnswer'>Delete</a>
                  <select class='form-control multipleChoice'>
                    <option>May Select</option>
                    <option>Must Select</option>
                    <option>Terminate if Select</option>
                  </select>
                  <input type='text' class='form-control answerInput'>
                  <a class='deleteAnswer'>Delete</a>
                  <select class='form-control multipleChoice'>
                    <option>May Select</option>
                    <option>Must Select</option>
                    <option>Terminate if Select</option>
                  </select>
                  <input type='text' class='form-control answerInput'>
                  <a class='deleteAnswer'>Delete</a>
                  <select class='form-control multipleChoice'>
                    <option>May Select</option>
                    <option>Must Select</option>
                    <option>Terminate if Select</option>
                  </select>
                  <a id="appendHere"></a>
                  <button type='button' id='addAnswer'>Add new answer</button>
                </div>
                <div class='form-check'>
                  <label class='form-check-label'>
                    <input class='form-check-input' type='checkbox' value=''>
                    Allow "None of the Above"
                  </label>
                  <label class='form-check-label'>
                    <input class='form-check-input' type='checkbox' value=''>
                    Shuffle Option Order
                  </label>
                </div>
                <button type='cancel' class='btn btn-active cancelButton'>Cancel</button>
                <button type='save' class='btn btn-primary saveButton'>Save</button>
              </form>
            </div>
          </div>

        </div>

        <div class="col-md-3 offset-md-1">
            <div class="row" id="quickSearch">
                <h5>Quick Search</h5>
            </div>
        </div>
    </div>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
                    <h4 class="modal-title" id="myModalLabel">Delete Question</h4>
                </div>
                <div class="modal-body">
                    <p>Do you want to delete this question?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function() {
            var count = 1;

            $('#myModal').on('shown.bs.modal', function() {
                $('#myInput').focus();
            });

            $("#addNew").click(function() {
                $("#questions").append(
                    "<a class='anchor' id='question"+ count +"'></a><div id='question' value='"+ count +"' class='card'><div class='card-header'><strong>Question " + count + "</strong><button id='deleteButton' type='button' class='btn btn-danger' data-toggle='modal' data-target='#myModal'>Delete</button><button id='editButton' value='"+ count +"' type='button' class='editButton btn btn-warning'>Edit</button></div><div class='card-block mainQuestion'><p class='card-text'>Some quick example text to build on the card title</p></div><div class='card-block edit' style='display: none;'><form class='editSection' value='" + count +"' style='background-color: grey;'><div class='form-group questionText'><label for='comment'>Question:</label><textarea class='form-control' id='comment'></textarea></div><div class='form-group answers'><label for='sel1'>Answers:</label><input type='text' class='form-control answerInput'><a class='deleteAnswer'>Delete</a><select class='form-control multipleChoice' id='sel1'><option>May Select</option><option>Must Select</option><option>Terminate if Select</option></select><input type='text' class='form-control answerInput'><a class='deleteAnswer'>Delete</a><select class='form-control multipleChoice' id='sel1'><option>May Select</option><option>Must Select</option><option>Terminate if Select</option></select><input type='text' class='form-control answerInput'><a class='deleteAnswer'>Delete</a><select class='form-control multipleChoice' id='sel1'><option>May Select</option><option>Must Select</option><option>Terminate if Select</option></select><a id='appendHere'></a><button type='button' id='addAnswer'>Add new answer</button></div><div class='form-check'><label class='form-check-label'><input class='form-check-input' type='checkbox' value=''>Allow None of the Above</label><label class='form-check-label'><input class='form-check-input' type='checkbox' value=''>Shuffle Option Order</label></div><button type='button' class='btn btn-active cancelButton'>Cancel</button><button type='button' class='btn btn-primary saveButton'>Save</button></form></div></div>"
                );
                $("#quickSearch").append("<a href='#question"+ count +"'>Question " + count + "</a></br>");
                count++;
            });

            $( "#questions" ).on("click", "#question div.card-header button.editButton", function() {
              $(this).parents().siblings("div.card-block.edit").toggle(500);
            });

            $("#questions").on("click", "#question div.card-block.edit form button.saveButton", function() {
              console.log($(this).siblings("div.form-group.questionText").children("textarea").val());
              // console.log($(this).parents("div#question").children("div.card-block.mainQuestion").text());
              $(this).parents("div#question").children("div.card-block.mainQuestion").text($(this).siblings("div.form-group.questionText").children("textarea").val());
              $(this).parents("div.card-block.edit").toggle(500);
            });

            $("#questions").on("click", "#question div.card-block.edit form button.cancelButton", function() {
              $(this).parents("div.card-block.edit").toggle(500);
            });

            $("#questions").on("click", "#question div.card-block.edit form div.form-group.answers button#addAnswer", function() {
              console.log($(this).parents("div.form-group.answers"));
              $($(this).parents("div.form-group.answers").children("a#appendHere")).append("<input type='text' class='form-control answerInput'><a class='deleteAnswer'>Delete</a><select class='form-control multipleChoice' id='sel1'><option>May Select</option><option>Must Select</option><option>Terminate if Select</option></select>");
            });
        });
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>
</body>

</html>
